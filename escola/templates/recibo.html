{% extends 'base.html' %}

{% block title %}Recibo - Sistema Escolar{% endblock %}

{% block extra_css %}
<style>
    @media print {
        .no-print {
            display: none !important;
        }
        .recibo-container {
            box-shadow: none !important;
            border: 2px solid #000 !important;
        }
    }
    .recibo-container {
        background: white;
        padding: 40px;
        margin: 20px auto;
        max-width: 800px;
        box-shadow: 0 0 20px rgba(0,0,0,0.1);
        border: 1px solid #ddd;
    }
    .recibo-header {
        text-align: center;
        border-bottom: 2px solid #0d6efd;
        padding-bottom: 20px;
        margin-bottom: 30px;
    }
    .recibo-body {
        line-height: 2;
    }
    .recibo-footer {
        margin-top: 50px;
        padding-top: 20px;
        border-top: 1px solid #ddd;
    }
    .assinatura {
        margin-top: 60px;
        text-align: center;
    }
    .linha-assinatura {
        border-top: 1px solid #000;
        width: 300px;
        margin: 0 auto;
    }
</style>
{% endblock %}

{% block content %}
<div class="no-print mb-3">
    <a href="{% url 'mensalidade_lista' %}" class="btn btn-secondary">
        <i class="bi bi-arrow-left"></i> Voltar
    </a>
    <button onclick="window.print()" class="btn btn-primary">
        <i class="bi bi-printer"></i> Imprimir Recibo
    </button>
</div>

<div class="recibo-container">
    <div class="recibo-header">
        <h2><i class="bi bi-mortarboard-fill"></i> SISTEMA ESCOLAR</h2>
        <p class="mb-0"><strong>RECIBO DE PAGAMENTO DE MENSALIDADE</strong></p>
        <small>Nº {{ mensalidade.id|stringformat:"06d" }}</small>
    </div>

    <div class="recibo-body">
        <p><strong>Recebi de:</strong> {{ mensalidade.aluno.nome_pai|default:mensalidade.aluno.nome_mae|default:"Responsável" }}</p>
        
        <p><strong>Referente ao aluno:</strong> {{ mensalidade.aluno.nome }}</p>
        
        <p><strong>Documento do aluno:</strong> {{ mensalidade.aluno.documento }}</p>
        
        <p><strong>A importância de:</strong> R$ {{ mensalidade.valor|floatformat:2 }} 
           ({{ mensalidade.valor|floatformat:2|extenso }})</p>
        
        <p><strong>Referente a:</strong> Mensalidade escolar do mês {{ mensalidade.vencimento|date:"m/Y" }}</p>
        
        <p><strong>Vencimento:</strong> {{ mensalidade.vencimento|date:"d/m/Y" }}</p>
        
        <p><strong>Data do Pagamento:</strong> {{ mensalidade.data_pagamento|date:"d/m/Y"|default:"___/___/______" }}</p>
        
        <p><strong>Forma de Pagamento:</strong> {{ forma_pagamento|default:"Dinheiro" }}</p>
        
        {% if mensalidade.observacoes %}
        <p><strong>Observações:</strong> {{ mensalidade.observacoes }}</p>
        {% endif %}
    </div>

    <div class="recibo-footer">
        <p class="text-muted"><small>
            Emitido em: {{ hoje|date:"d/m/Y" }} às {{ hoje|time:"H:i" }}<br>
            Este recibo comprova o pagamento da mensalidade escolar referente ao período mencionado.
        </small></p>
    </div>

    <div class="assinatura">
        <div class="linha-assinatura"></div>
        <p class="mt-2 mb-0"><strong>Assinatura do Responsável</strong></p>
        <small>Sistema Escolar</small>
    </div>
</div>

<div class="no-print alert alert-info mt-3">
    <i class="bi bi-info-circle"></i> <strong>Dica:</strong> Use o botão "Imprimir Recibo" acima ou pressione Ctrl+P para imprimir este recibo.
</div>
{% endblock %}
